<!DOCTYPE html>
<!--
# Wobbly's SFWCHAT.
# I'm no legal expert, so I'll tell this to you in a very simple manner.
# Don't copy this stuff. Am I going to do anything about it? No.
# Just please don't, I worked hard on this as I'm sure you're working
# hard on reading this, because if you thought that you could just copy this
# and I'd be fine with it you aren't only wrong, but you are also stupid.
# Partially.
- Current Official URL: wobbly.repl.co/sfwchat/
- Current Status: Unreleased
-->
<html>
  <head>
    <title>login</title>
    <meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
		<meta name="description" content="" />
		<meta name="keywords" content="" />
		<link rel="stylesheet" href="main.css" />
  </head>
  <body class="is-preload">
    <header id="header">
      <a class="logo" href="homepage.html">sfwchat</a>
    </header>
    <div id="heading" >
			<h1>sfwchat</h1>
		</div>
		<section id="main" class="wrapping">
		  <div class="inner">
		    <div class="content">
		      <div class="row">
		        <div>
		          <h3>wobbly's sfwchat / codeychat</h3>
		          <p>
		            Welcome to the new, <b>experimental</b> homepage of
		            sfwchat / codeychat! Here are a few things you should know
		            about the new layout.
		          </p>
		           <div class="row">
								<div class="col-6 col-12-small">
								  <ul>
								    <li><b>Enter can now be used!</b> Previously you had to press "submit plox" in order to submit your messages. With the new, updated version of the site the <b>enter</b> key works reliably!</li>
								    <li><b>Still the same!</b> The only real difference is cosmetic - it should look a lot more professional now.</li>
								    <li><b>You can revert to the old layout!</b> Don't like the new one? Just press "old layout" up in the top.</li>
								  </ul>
								  <ul>
                    <input type="text" id="userID" placeholder="username / email">   <br>
                    <input type="password" id="pin" placeholder="password"> <br>
								  </ul>
								  <ul class="actions">
										<li><a onclick="uuh()" class="button primary">Submit</a></li>
										<li><a onclick="goBackHome()" class="button">Go Back</a></li>
									</ul>
								</div>
								<p>
								  Here liveth the login page. Enter your <b>username</b> or <b>email</b> and you'll
								  be on your way!
								</p>
							</div>
		        </div>
		      </div>
		    </div>
		  </div>
		</section>
	<script>
	  function goBackHome() {
	    window.location.href = "homepage.html";
	  }
	</script>
	<script src="firebase.js"></script>
	<script>var config={apiKey:"AIzaSyAHhBe4eMBZ_M39UWMW30b5zzJ1slVs0jw",authDomain:"codeychat-20d66.firebaseapp.com",databaseURL:"https://codeychat-20d66.firebaseio.com",projectId:"codeychat-20d66",storageBucket:"codeychat-20d66.appspot.com",messagingSenderId:"531033258195"};firebase.initializeApp(config);var database=firebase.database(),ref=firebase.database().ref();function logWithEmail(){console.log("Email started"),firebase.auth().signInWithEmailAndPassword(document.getElementById("userID").value,document.getElementById("pin").value).catch(function(b){var c=b.code,d=b.message});let a=firebase.database().ref("/users/c/emailToUsername/"+document.getElementById("userID").value.replace(".",",")+"/username");a.once("value",b=>{thingy=b.val(),uuid=thingy})}function logWithUsername(){console.log("Username started");let a=firebase.database().ref("/users/c/usernameToEmail/"+document.getElementById("userID").value.toLowerCase()+"/email");a.once("value",b=>{thingy=b.val(),document.getElementById("userID").value=thingy.replace(",",".")}),logWithEmail()}function uuh(){uhh(),uhh()}function uhh(){document.getElementById("userID").value.includes("@")?logWithEmail():logWithUsername()}firebase.auth().onAuthStateChanged(function(a){a&&(window.location.href="newlayout.html")});</script>
	</body>
</html>